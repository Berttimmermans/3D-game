!function(){function a(){return{pos:{x:0,y:0},mode:"moving"}}function b(){this.d=a()}b.prototype.init=function(){},b.prototype.controlReceiver=function(a,b){"dPad"==a&&$("#dev-data").html("x = "+b.x+" - y = "+b.y)},b.prototype.dPad=function(a){return this.controlDispatcher("dPad",a)},b.prototype.controlDispatcher=function(a,b){return this.controlReceiver(a,b)},window.Game=b}(),function(){function a(a){this.game=a,this.pos={x:0,y:0}}a.prototype=function(){function b(){var a=this;$(document).keydown(function(b){var c=b.which;return 38==c&&(a.pos.y=-1),39==c&&(a.pos.x=1),40==c&&(a.pos.y=1),37==c&&(a.pos.x=-1),a.game.dPad(a.pos)}),$(document).keyup(function(b){var c=b.which;return(38==c||40==c)&&(a.pos.y=0),(39==c||37==c)&&(a.pos.x=0),a.game.dPad(a.pos)})}return{constructor:a,init:function(){return this._(b)()},_:function(a){var b=this;return function(){return a.apply(b,arguments)}}}}(),window.Keyboard=a}(),$(document).ready(function(){var a=new Game;a.init();var b=new Keyboard(a);b.init();var c=new Touch(a);c.init()}),function(){function a(a){this.game=a,this.pos={x:0,y:0},this.size=160,this.buttonSize=80,this.iPad=null!=navigator.userAgent.match(/iPad/i),this.iPhone=null!=navigator.userAgent.match(/iPhone/i),this.iPod=null!=navigator.userAgent.match(/iPod/i),this.android=null!=navigator.userAgent.match(/Android/i)}a.prototype.init=function(){(1==this.iPad||1==this.iPhone||1==this.iPod||1==this.android)&&this.build()},a.prototype.build=function(){var a=this;$("body").append('<div class="controls"></div>'),$(".controls").append('<div id="dPad"><div id="dPad-stick"></div></</div>'),$("body").bind("touchstart",function(a){return a.preventDefault()}),$("#dPad").bind("touchstart",function(){$(this).addClass("active")}).bind("touchmove",function(b){var c=b.originalEvent.touches[0].pageX,d=b.originalEvent.touches[0].pageY,e=$(this).position(),f=c-e.left-a.size/2,g=d-e.top-a.size/2,h=(a.size-a.buttonSize)/2;return-h>f&&(f=-h),f>h&&(f=h),-h>g&&(g=-h),g>h&&(g=h),a.translate(f,g),a.pos.x=f<-(a.size/8)?-1:f>a.size/8?1:0,a.pos.y=g<-(a.size/8)?-1:g>a.size/8?1:0,a.game.dPad(a.pos)}).bind("touchend",function(){return $(".controls .active").removeClass("active"),a.pos={x:0,y:0},a.translate(0,0),a.game.dPad(a.pos)})},a.prototype.translate=function(a,b){object=document.getElementById("dPad-stick"),object.style.webkitTransform="translate("+a+"px,"+b+"px)"},a.prototype.rotate=function(a){object=document.getElementById("dPad-stick"),object.style.webkitTransform="rotate("+a+"deg)"},window.Touch=a}();